# GWS + WebRTC SIP Endpoint - Integration Diagram

## ğŸ¨ Visual Integration Overview

This document provides detailed visual representations of how Genesys Workspace Web Edition (GWS) integrates with the WebRTC SIP endpoint infrastructure.

---

## 1. Complete System Architecture

```
                                 AGENT WORKSTATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser (Chrome/Firefox/Edge)                                           â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Tab 1: GWS Agent Desktop  â”‚    â”‚ Tab 2: WebRTC SIP Client      â”‚    â”‚
â”‚  â”‚ http://localhost:8080     â”‚    â”‚ https://webrtc-server         â”‚    â”‚
â”‚  â”‚                            â”‚    â”‚                                â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚ Agent Login         â”‚   â”‚    â”‚ â”‚ SIP Registration         â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ Username: agent5001 â”‚   â”‚    â”‚ â”‚ DN: 5001                 â”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚ â”‚ Password: ********       â”‚ â”‚    â”‚
â”‚  â”‚                            â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚                                â”‚    â”‚
â”‚  â”‚ â”‚ Call Controls       â”‚   â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Answer            â”‚   â”‚    â”‚ â”‚ Audio Interface          â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Hold              â”‚   â”‚    â”‚ â”‚ â€¢ Microphone Input       â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Transfer          â”‚   â”‚    â”‚ â”‚ â€¢ Speaker Output         â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Conference        â”‚   â”‚    â”‚ â”‚ â€¢ Volume Control         â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Release           â”‚   â”‚    â”‚ â”‚ â€¢ Mute Button            â”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                            â”‚    â”‚                                â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚ Screen Pop          â”‚   â”‚    â”‚ â”‚ Call Status              â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Customer Name     â”‚   â”‚    â”‚ â”‚ Registration: OK         â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Account #         â”‚   â”‚    â”‚ â”‚ Call State: Connected    â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Call History      â”‚   â”‚    â”‚ â”‚ Duration: 00:05:23       â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Interaction Data  â”‚   â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚                                â”‚    â”‚
â”‚  â”‚                            â”‚    â”‚                                â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚                                â”‚    â”‚
â”‚  â”‚ â”‚ Agent State         â”‚   â”‚    â”‚                                â”‚    â”‚
â”‚  â”‚ â”‚ Status: Ready       â”‚   â”‚    â”‚                                â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚              â”‚                                   â”‚                         â”‚
â”‚              â”‚ REST API                          â”‚ WSS                     â”‚
â”‚              â”‚ CometD (WebSocket)                â”‚ (SIP over WebSocket)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                   â”‚
               â”‚ HTTPS/WSS                        â”‚ WSS
               â”‚                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚                                                  â”‚
        â”‚         APPLICATION SERVER LAYER                â”‚
        â”‚                                                  â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  GWS Application (localhost:8080)        â”‚  â”‚
        â”‚  â”‚  h:\Abhishek\gws-main                    â”‚  â”‚
        â”‚  â”‚                                           â”‚  â”‚
        â”‚  â”‚  Components:                              â”‚  â”‚
        â”‚  â”‚  â€¢ Spring Boot Web Server                 â”‚  â”‚
        â”‚  â”‚  â€¢ REST API Endpoints                     â”‚  â”‚
        â”‚  â”‚  â€¢ CometD Server (Real-time push)         â”‚  â”‚
        â”‚  â”‚  â€¢ Session Management                     â”‚  â”‚
        â”‚  â”‚  â€¢ Agent Desktop UI                       â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                   â”‚ PSDK                         â”‚
        â”‚                   â”‚ (Platform SDK Protocol)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ TCP
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                   â”‚
        â”‚         WEBRTC/SIP INFRASTRUCTURE                â”‚
        â”‚         f:\Project\WebRTC                         â”‚
        â”‚         (192.168.77.131 or cloud)                â”‚
        â”‚                                                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  Nginx (Reverse Proxy)                     â”‚ â”‚
        â”‚  â”‚  Port: 443 (HTTPS/WSS)                     â”‚ â”‚
        â”‚  â”‚  â€¢ SSL/TLS Termination                      â”‚ â”‚
        â”‚  â”‚  â€¢ WebSocket Proxy                         â”‚ â”‚
        â”‚  â”‚  â€¢ Static File Serving                     â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚               â”‚ Proxy                            â”‚
        â”‚               â”‚                                  â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  Asterisk (SIP/WebRTC Gateway)             â”‚ â”‚
        â”‚  â”‚  Ports: 5060 (SIP), 8089 (WSS)             â”‚ â”‚
        â”‚  â”‚        10000-20000 (RTP/SRTP)              â”‚ â”‚
        â”‚  â”‚                                             â”‚ â”‚
        â”‚  â”‚  â€¢ WebRTC â†” SIP Translation                â”‚ â”‚
        â”‚  â”‚  â€¢ Agent DN Endpoints (5001-5999)          â”‚ â”‚
        â”‚  â”‚  â€¢ Codec Transcoding (Opus â†” G.711)        â”‚ â”‚
        â”‚  â”‚  â€¢ Media Proxy (SRTP â†” RTP)                â”‚ â”‚
        â”‚  â”‚  â€¢ NAT Traversal (STUN/TURN)               â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚               â”‚ SIP Trunk                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ SIP (UDP/TCP)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                   â”‚
        â”‚         GENESYS ENGAGE PLATFORM                   â”‚
        â”‚         (Your Corporate Network)                  â”‚
        â”‚                                                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  Configuration Server                      â”‚ â”‚
        â”‚  â”‚  Port: 5000                                â”‚ â”‚
        â”‚  â”‚  â€¢ Agent Configuration                      â”‚ â”‚
        â”‚  â”‚  â€¢ DN Management                           â”‚ â”‚
        â”‚  â”‚  â€¢ Skills & Routing                        â”‚ â”‚
        â”‚  â”‚  â€¢ Switch Objects                          â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                â”‚                                 â”‚
        â”‚                â”‚ Internal Genesys Protocol       â”‚
        â”‚                â”‚                                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  T-Server (Telephony Control)              â”‚ â”‚
        â”‚  â”‚  Port: 5025                                â”‚ â”‚
        â”‚  â”‚  â€¢ Call Control Commands                    â”‚ â”‚
        â”‚  â”‚  â€¢ Agent State Management                   â”‚ â”‚
        â”‚  â”‚  â€¢ CTI Events                              â”‚ â”‚
        â”‚  â”‚  â€¢ Call Routing                            â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                â”‚                                 â”‚
        â”‚                â”‚ SIP Control                     â”‚
        â”‚                â”‚                                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  SIP Server                                â”‚ â”‚
        â”‚  â”‚  Port: 5060/5061                           â”‚ â”‚
        â”‚  â”‚  â€¢ DN Registration                          â”‚ â”‚
        â”‚  â”‚  â€¢ SIP Trunk Management                     â”‚ â”‚
        â”‚  â”‚  â€¢ Call Signaling                          â”‚ â”‚
        â”‚  â”‚  â€¢ Media Control                           â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                â”‚                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ SIP/RTP
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  PSTN Gateway / Carrier                          â”‚
        â”‚  â€¢ External Call Connectivity                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Data Flow - Inbound Call

```
Step 1: Call Arrives
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PSTN Customer (555-1234567)
    â”‚
    â”‚ Dials: 1-800-COMPANY
    â”‚
    â–¼
[PSTN Gateway]
    â”‚
    â”‚ SIP INVITE
    â”‚ To: +18005551234
    â”‚
    â–¼
[Genesys SIP Server]
    â”‚
    â”‚ Route lookup
    â”‚ DNIS: +18005551234 â†’ Route Point: 5000
    â”‚
    â–¼
[T-Server]
    â”‚
    â”‚ EventRouteRequest
    â”‚ Apply routing strategy
    â”‚
    â–¼
[URS - Universal Routing Server]
    â”‚
    â”‚ Skills-based routing
    â”‚ Queue position: 1
    â”‚ Agent selection: agent5001 (DN: 5001)
    â”‚ Reason: Longest available, has required skills
    â”‚
    â–¼

Step 2: Agent Notification (DUAL PATH)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PATH A: GWS (Screen Pop)          â”‚  PATH B: SIP (Audio)
                                   â”‚
[T-Server]                         â”‚  [Genesys SIP Server]
    â”‚                              â”‚      â”‚
    â”‚ EventRinging                 â”‚      â”‚ SIP INVITE
    â”‚ ConnID: 00015ABC1234         â”‚      â”‚ To: sip:5001@asterisk
    â”‚ ANI: 5551234567              â”‚      â”‚ From: 5551234567
    â”‚ UserData: {                  â”‚      â”‚ P-Asserted-Identity: ...
    â”‚   customer_id: 98765         â”‚      â”‚
    â”‚   account_type: premium      â”‚      â–¼
    â”‚   call_reason: support       â”‚  [Asterisk]
    â”‚ }                            â”‚      â”‚
    â”‚                              â”‚      â”‚ Lookup DN: 5001
    â–¼                              â”‚      â”‚ WebSocket endpoint found
[GWS Application]                  â”‚      â”‚
    â”‚                              â”‚      â”‚ SIP INVITE
    â”‚ Process EventRinging         â”‚      â”‚ Via: WSS
    â”‚ Load customer data           â”‚      â”‚
    â”‚ Create call object           â”‚      â–¼
    â”‚                              â”‚  [WebRTC Client (Browser)]
    â”‚ CometD Push                  â”‚      â”‚
    â”‚ Channel: /v2/me/calls        â”‚      â”‚ Incoming call detected!
    â”‚ Payload: {                   â”‚      â”‚ Play ring tone
    â”‚   callId: 00015ABC1234       â”‚      â”‚ Display notification
    â”‚   state: "Ringing"           â”‚      â”‚
    â”‚   ani: "5551234567"          â”‚      â”‚ Waiting for answer...
    â”‚   userData: {...}            â”‚      â”‚
    â”‚ }                            â”‚      â”‚
    â”‚                              â”‚      â”‚
    â–¼                              â”‚      â–¼
[Agent Browser - GWS UI]           â”‚  [Agent Browser - WebRTC UI]
    â”‚                              â”‚      â”‚
    â”‚ Screen pop appears!          â”‚      â”‚ ğŸ”” Ring ring!
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â”‚ Incoming Call       â”‚     â”‚      â”‚ â”‚ Incoming Call    â”‚
    â”‚ â”‚ From: 555-123-4567  â”‚     â”‚      â”‚ â”‚ From: 5551234567 â”‚
    â”‚ â”‚                     â”‚     â”‚      â”‚ â”‚ Duration: 00:00  â”‚
    â”‚ â”‚ Customer: John Doe  â”‚     â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ â”‚ Account: Premium    â”‚     â”‚      â”‚
    â”‚ â”‚ Reason: Support     â”‚     â”‚      â”‚
    â”‚ â”‚                     â”‚     â”‚      â”‚
    â”‚ â”‚ [Answer] [Reject]   â”‚     â”‚      â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚
    â”‚                              â”‚      â”‚
    â”‚                              â”‚      â”‚

Step 3: Agent Answers (Control via GWS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[Agent clicks "Answer" in GWS UI]
    â”‚
    â”‚ REST API Call
    â”‚ PUT /api/v2/me/calls/00015ABC1234
    â”‚ { action: "answer" }
    â”‚
    â–¼
[GWS Application]
    â”‚
    â”‚ Validate request
    â”‚ Get call object
    â”‚
    â”‚ PSDK Command
    â”‚ RequestAnswerCall
    â”‚ ConnID: 00015ABC1234
    â”‚
    â–¼
[T-Server]
    â”‚
    â”‚ Process answer request
    â”‚ Update call state
    â”‚
    â”‚ SIP Control
    â”‚
    â–¼
[Genesys SIP Server]
    â”‚
    â”‚ Send SIP 200 OK
    â”‚ (propagates to Asterisk â†’ WebRTC)
    â”‚
    â–¼
[Asterisk]
    â”‚
    â”‚ SIP 200 OK
    â”‚ Via: WSS
    â”‚
    â–¼
[WebRTC Client]
    â”‚
    â”‚ Call answered!
    â”‚ Establish media streams
    â”‚ Start RTP/SRTP
    â”‚
    â–¼

Step 4: Media Path Established
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[PSTN Customer]
    â†• RTP (G.711)
[Genesys SIP Server]
    â†• RTP (G.711)
[Asterisk]
    â”‚ Transcoding: G.711 â†” Opus
    â†• SRTP (Opus/WebRTC)
[Agent Browser (WebRTC Client)]

Audio flows in both directions simultaneously!

Step 5: Call State Updates
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[T-Server]
    â”‚
    â”‚ EventEstablished
    â”‚ ConnID: 00015ABC1234
    â”‚ State: Connected
    â”‚ StartTime: 2025-01-15T10:23:45Z
    â”‚
    â–¼
[GWS Application]
    â”‚
    â”‚ CometD Push
    â”‚ Channel: /v2/me/calls
    â”‚ Payload: {
    â”‚   callId: 00015ABC1234
    â”‚   state: "Established"
    â”‚   duration: 0
    â”‚ }
    â”‚
    â–¼
[GWS UI]
    â”‚
    â”‚ Update call state
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â”‚ Active Call             â”‚
    â”‚ â”‚ With: 555-123-4567      â”‚
    â”‚ â”‚ Duration: 00:01:23      â”‚
    â”‚ â”‚                         â”‚
    â”‚ â”‚ [Hold] [Transfer] [End] â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Start call timer
    â”‚ Enable call controls
```

---

## 3. Data Flow - Outbound Call (Click-to-Dial)

```
Step 1: Agent Initiates Call
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[Agent in GWS UI]
    â”‚
    â”‚ Enters phone number: 555-987-6543
    â”‚ Clicks "Dial" button
    â”‚
    â”‚ REST API Call
    â”‚ POST /api/v2/me/calls
    â”‚ {
    â”‚   destination: "5559876543",
    â”‚   userData: {
    â”‚     customer_id: 12345,
    â”‚     campaign: "sales"
    â”‚   }
    â”‚ }
    â”‚
    â–¼
[GWS Application]
    â”‚
    â”‚ Validate request
    â”‚ Check agent state (must be Ready)
    â”‚
    â”‚ PSDK Command
    â”‚ RequestMakeCall
    â”‚ ThisDN: 5001
    â”‚ OtherDN: 5559876543
    â”‚ UserData: {...}
    â”‚
    â–¼
[T-Server]
    â”‚
    â”‚ Process make call request
    â”‚ Create call object
    â”‚ Generate ConnID: 00015ABC5678
    â”‚
    â”‚ Two-party call setup:
    â”‚ 1. Call agent leg first
    â”‚ 2. Then call customer
    â”‚
    â–¼

Step 2: Agent Leg Rings
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[T-Server]
    â”‚
    â”‚ SIP INVITE to agent DN
    â”‚
    â–¼
[Genesys SIP Server]
    â”‚
    â”‚ SIP INVITE
    â”‚ To: sip:5001@asterisk
    â”‚
    â–¼
[Asterisk]
    â”‚
    â”‚ Forward to WebRTC client
    â”‚
    â–¼
[WebRTC Client]
    â”‚
    â”‚ Auto-answer (configured for outbound)
    â”‚ SIP 200 OK
    â”‚
    â”‚ Agent now connected to call
    â”‚ Hears: ringing tone or music
    â”‚
    â–¼

Step 3: Customer Leg Dialed
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[T-Server]
    â”‚
    â”‚ Dial external number
    â”‚ Route via Genesys routing
    â”‚
    â–¼
[Genesys SIP Server]
    â”‚
    â”‚ SIP INVITE
    â”‚ To: 5559876543
    â”‚ Via: PSTN Gateway
    â”‚
    â–¼
[PSTN Gateway]
    â”‚
    â”‚ Place call to PSTN
    â”‚
    â–¼
[Customer Phone]
    â”‚
    â”‚ Ring ring! ğŸ“
    â”‚
    â”‚

Step 4: Customer Answers
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[Customer Phone]
    â”‚
    â”‚ Customer answers
    â”‚
    â–¼
[PSTN Gateway]
    â”‚
    â”‚ SIP 200 OK
    â”‚
    â–¼
[Genesys SIP Server]
    â”‚
    â”‚ 200 OK to T-Server
    â”‚
    â–¼
[T-Server]
    â”‚
    â”‚ Bridge both legs
    â”‚ Agent â†” Customer
    â”‚
    â”‚ EventEstablished
    â”‚
    â–¼
[GWS Application]
    â”‚
    â”‚ CometD Push
    â”‚ Update call state: Established
    â”‚
    â–¼
[GWS UI]
    â”‚
    â”‚ Show: Connected to 555-987-6543
    â”‚ Start call timer
    â”‚ Enable controls
```

---

## 4. Protocol Stack Diagram

```
AGENT BROWSER          GWS SERVER          GENESYS          ASTERISK          PSTN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTTPS   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ CometD   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Bayeux   â”‚          â”‚
â”‚ Client   â”‚  WSS      â”‚ Server   â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚JavaScriptâ”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚SIP Clientâ”‚           â”‚REST API  â”‚          â”‚
â”‚ (JsSIP)  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚
     â”‚                       â”‚               â”‚
     â”‚WSS                    â”‚PSDK           â”‚
     â”‚SIP                    â”‚TCP            â”‚
     â”‚                       â”‚               â”‚
     â”‚                  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”‚
     â”‚                  â”‚T-Server  â”‚        â”‚
     â”‚                  â”‚Protocol  â”‚        â”‚
     â”‚                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚
     â”‚                       â”‚              â”‚
     â”‚                       â”‚SIP Control   â”‚
     â”‚                  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”‚
     â”‚                  â”‚Genesys   â”‚       â”‚
     â”‚                  â”‚SIP Serverâ”‚       â”‚
     â”‚                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
     â”‚                       â”‚             â”‚
     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
     â”‚ â”‚                                   â”‚
     â–¼ â–¼                                   â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
  â”‚Asteriskâ”‚           â”‚Asterisk â”‚        â”‚
  â”‚WSS     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚PJSIP    â”‚        â”‚
  â”‚Transport          â”‚SIP Stack â”‚        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚
                            â”‚             â”‚
                            â”‚SIP          â”‚
                            â”‚             â”‚
                       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”‚
                       â”‚Genesys  â”‚        â”‚
                       â”‚SIP      â”‚        â”‚
                       â”‚Server   â”‚        â”‚
                       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚
                            â”‚             â”‚
                            â”‚SIP          â”‚
                            â”‚             â”‚
                       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”‚
                       â”‚PSTN     â”‚        â”‚
                       â”‚Gateway  â”‚        â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                                          â”‚
MEDIA PATH:                               â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
                                          â”‚
Browser (SRTP) â—„â”€â–º Asterisk (RTP) â—„â”€â–º Genesys â—„â”€â–º PSTN
  Opus codec       Transcoding         G.711      G.711
  WebRTC           G.711 â†” Opus
```

---

## 5. State Synchronization

```
Agent State Changes Flow
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

USER ACTION        GWS                T-SERVER           EFFECT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€

Click "Ready"  â†’   REST API       â†’   SetAgentState  â†’  DN 5001 available
                   /api/v2/me/state   (Ready)            for routing

Click "Not      â†’  REST API       â†’   SetAgentState  â†’  DN 5001 NOT
Ready"             /api/v2/me/state   (NotReady)         available

After Call      â†’  [Automatic]    â†’   SetAgentState  â†’  Agent in ACW
Work                                   (AfterCallWork)    (wrap-up)

Complete ACW    â†’  REST API       â†’   SetAgentState  â†’  Back to Ready
                   /api/v2/me/state   (Ready)            or NotReady


Call State Synchronization
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T-SERVER EVENT         GWS ACTION              UI UPDATE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€

EventRinging       â†’   CometD Push         â†’   Show incoming call
                       /v2/me/calls             Screen pop appears

EventEstablished   â†’   CometD Push         â†’   Update to "Connected"
                       /v2/me/calls             Start call timer

EventHeld          â†’   CometD Push         â†’   Show "On Hold" status
                       /v2/me/calls             Disable some controls

EventRetrieved     â†’   CometD Push         â†’   Show "Active" again
                       /v2/me/calls             Enable controls

EventReleased      â†’   CometD Push         â†’   Clear call
                       /v2/me/calls             Show ACW panel


SIP Registration Synchronization
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COMPONENT              STATE                   SYNCHRONIZED BY
â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

WebRTC Client      â†’   Registered DN: 5001     SIP REGISTER
Asterisk           â†’   Endpoint 5001 active    PJSIP
Genesys SIP Server â†’   DN 5001 registered      SIP Registration
T-Server           â†’   DN 5001 in-service      Monitoring
GWS                â†’   Agent logged in DN:5001 Config Server lookup
```

---

## 6. Ports and Protocols Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AGENT WORKSTATION                                                  â”‚
â”‚                                                                     â”‚
â”‚  Browser                                                            â”‚
â”‚  â”œâ”€ HTTPS/443      â†’ GWS Web Server                               â”‚
â”‚  â”œâ”€ WSS/443        â†’ CometD Real-time                             â”‚
â”‚  â”œâ”€ WSS/443 (/ws)  â†’ Asterisk SIP                                 â”‚
â”‚  â””â”€ SRTP/Random    â†’ Asterisk Media (via TURN if NAT)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GWS SERVER (localhost or server)                                   â”‚
â”‚                                                                     â”‚
â”‚  Port 8080    - GWS Web Application (HTTP)                         â”‚
â”‚  Port 8080    - CometD WebSocket (WSS if HTTPS)                    â”‚
â”‚  Port varies  â†’ Configuration Server :5000                         â”‚
â”‚  Port varies  â†’ T-Server :5025                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WEBRTC/ASTERISK SERVER (192.168.77.131)                            â”‚
â”‚                                                                     â”‚
â”‚  Port 443         - Nginx HTTPS/WSS (external)                     â”‚
â”‚  Port 8089        - Asterisk WSS (internal)                        â”‚
â”‚  Port 5060        - Asterisk SIP (to Genesys)                      â”‚
â”‚  Port 10000-20000 - RTP/SRTP (media)                               â”‚
â”‚  Port 3478        - TURN/STUN                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GENESYS ENGAGE PLATFORM (Corporate Network)                        â”‚
â”‚                                                                     â”‚
â”‚  Port 5000        - Configuration Server                           â”‚
â”‚  Port 5025        - T-Server                                       â”‚
â”‚  Port 5060        - Genesys SIP Server                             â”‚
â”‚  Port 2020        - Stat Server (optional)                         â”‚
â”‚  Port 8080        - URS (optional)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Message Flow - Transfer Call

```
BLIND TRANSFER (from GWS UI)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Agent in call with Customer
Agent wants to transfer to DN: 5002

[Agent clicks "Transfer" in GWS]
    â”‚
    â”‚ Enters: 5002
    â”‚ Clicks: "Transfer"
    â”‚
    â”‚ REST API
    â”‚ POST /api/v2/me/calls/00015ABC1234/transfer
    â”‚ {
    â”‚   destination: "5002",
    â”‚   type: "blind"
    â”‚ }
    â”‚
    â–¼
[GWS Application]
    â”‚
    â”‚ PSDK Command
    â”‚ RequestSingleStepTransfer
    â”‚ ConnID: 00015ABC1234
    â”‚ Destination: 5002
    â”‚
    â–¼
[T-Server]
    â”‚
    â”‚ Process transfer
    â”‚ Update call routing
    â”‚
    â”‚ SIP Control
    â”‚ REFER sip:5002
    â”‚
    â–¼
[Genesys SIP Server]
    â”‚
    â”‚ Execute SIP transfer
    â”‚ INVITE to 5002
    â”‚
    â–¼
[Target Agent DN: 5002]
    â”‚
    â”‚ Ring at target agent
    â”‚
    â”‚ Original agent released
    â”‚ Call transferred!
```

---

## 8. Monitoring Dashboard View

```
REAL-TIME SYSTEM STATUS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GWS Application Health                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: â— RUNNING                                   â”‚
â”‚ Uptime: 2h 34m 12s                                  â”‚
â”‚ Port: 8080                                          â”‚
â”‚                                                      â”‚
â”‚ Connections:                                        â”‚
â”‚ â”œâ”€ Config Server:  âœ“ CONNECTED (192.168.1.100)    â”‚
â”‚ â”œâ”€ T-Server:       âœ“ CONNECTED (192.168.1.101)    â”‚
â”‚ â””â”€ Database:       âœ“ CONNECTED                     â”‚
â”‚                                                      â”‚
â”‚ Active Sessions: 5                                  â”‚
â”‚ CometD Clients: 5                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Asterisk/WebRTC Status                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: â— RUNNING                                   â”‚
â”‚                                                      â”‚
â”‚ Registered Endpoints: 5                             â”‚
â”‚ â”œâ”€ 5001 (agent5001) - âœ“ REGISTERED                â”‚
â”‚ â”œâ”€ 5002 (agent5002) - âœ“ REGISTERED                â”‚
â”‚ â”œâ”€ 5003 (agent5003) - âœ“ REGISTERED                â”‚
â”‚ â”œâ”€ 5004 (agent5004) - âœ“ REGISTERED                â”‚
â”‚ â””â”€ 5005 (agent5005) - âœ“ REGISTERED                â”‚
â”‚                                                      â”‚
â”‚ Active Calls: 2                                     â”‚
â”‚ Trunk Status: âœ“ UP (to Genesys)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent States (via T-Server)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ready:          3 agents                            â”‚
â”‚ Not Ready:      1 agent                             â”‚
â”‚ On Call:        2 agents                            â”‚
â”‚ After Call Work: 1 agent                            â”‚
â”‚ Logged Out:     18 agents                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Call Statistics (Last Hour)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Inbound Calls:     127                              â”‚
â”‚ Outbound Calls:     45                              â”‚
â”‚ Avg Handle Time:   5m 23s                           â”‚
â”‚ Abandoned:          8 (6.3%)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This integration diagram provides a complete visual reference for understanding how all components work together in your contact center infrastructure!



