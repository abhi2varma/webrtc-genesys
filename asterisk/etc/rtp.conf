;=====================================
; RTP Configuration for WebRTC
;=====================================

[general]
; RTP port range (limited to match router port forwarding: 10000-10100)
; TODO: Expand to 10000-20000 when network team opens full range
rtpstart=10000
rtpend=10100

; Enable ICE support for WebRTC
icesupport=yes

; ICE host candidate discovery
; Only advertise the public IP so remote WebRTC peers can reach Asterisk
ice_host_candidates=103.167.180.166

; DISABLE STUN - Asterisk's res_rtp_asterisk has broken STUN implementation
; It advertises 0.0.0.0:0 as SRFLX candidate when behind NAT
; Instead, we rely on:
; 1. Public host candidate (103.167.180.166)
; 2. Browser's TURN relay (for external connections)
; 3. NAT port forwarding (iptables DNAT/MASQUERADE)
; 
; The external_media_address in pjsip.conf transport doesn't affect ICE candidates,
; it only affects the c= line in SDP

; NOTE: TURN relay is not supported by Asterisk's res_rtp_asterisk module
; Browser will use TURN relay, Asterisk will use direct host candidates
; The NAT/firewall configuration should allow UDP traffic on ports 10000-10100

; RTP timeout settings
rtptimeout=60
rtpholdtimeout=300

; Enable strict RTP protection
strictrtp=yes
