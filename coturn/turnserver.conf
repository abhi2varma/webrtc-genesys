# TURN Server Configuration for WebRTC

# Listening port for TURN
listening-port=3478
tls-listening-port=5349

# Listening IP (bind to all interfaces)
listening-ip=0.0.0.0

# Also explicitly listen for UDP STUN
listening-ip=192.168.210.54

# Relay IP (should be your public IP)
relay-ip=103.167.180.166

# External IP (format: external-ip=PUBLIC_IP/INTERNAL_IP)
external-ip=103.167.180.166/192.168.210.54

# TURN server realm
realm=webrtc.genesys.local

# Server name
server-name=coturn-genesys

# Use fingerprints in TURN messages
fingerprint

# Enable long-term credentials
lt-cred-mech

# Static user account for TURN
user=webrtc:Genesys2024!SecureTurn

# Total quota per user
total-quota=100
bps-capacity=0

# Max port for relay (reduced for POC testing - 100 ports for ~50-100 concurrent sessions)
max-port=49252
min-port=49152

# Log file (with rotation)
log-file=/var/log/coturn/turnserver.log
log-file-size-limit=10485760
verbose

# Certificate for TLS
cert=/etc/certs/cert.pem
pkey=/etc/certs/key.pem

# No multicast
no-multicast-peers

# Allow loopback for testing (needed for local network testing)
# no-loopback-peers

# Security options
no-tlsv1
no-tlsv1_1
cipher-list="ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384"

# Mobility
mobility

# Allow loopback for testing (remove in production)
# no-loopback-peers

# Process details - commented out to avoid permission errors in Docker
# Container will run as default user
#proc-user=root
#proc-group=root




